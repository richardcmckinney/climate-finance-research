# ===========================================
# Climate Finance Research Pipeline .gitignore
# Version 4.0 - Comprehensive with Documentation
# ===========================================
#
# PURPOSE:
# This .gitignore file protects sensitive data and maintains repository hygiene
# for the Climate Finance Research Pipeline. It serves multiple critical functions:
#
# 1. DATA PRIVACY PROTECTION:
#    - Prevents accidental commits of raw survey data containing PII
#    - Blocks files with email addresses, names, organization identifiers
#    - Excludes geographic data that could identify respondents
#
# 2. REPRODUCIBILITY ASSURANCE:
#    - Keeps only anonymized, processed datasets in version control
#    - Maintains clear separation between raw and public data
#    - Preserves only verified, privacy-compliant outputs
#
# 3. REPOSITORY CLEANLINESS:
#    - Excludes temporary files, logs, and system-specific files
#    - Prevents IDE configurations from affecting other developers
#    - Blocks large binary files that shouldn't be versioned
#
# 4. COMPLIANCE WITH ETHICS:
#    - Enforces Oxford CUREC ethics approval requirements
#    - Ensures GDPR compliance by excluding identifiable data
#    - Maintains audit trail of what data is public vs. private
#
# CRITICAL NOTES:
# - Raw data should NEVER be committed, even accidentally
# - Only 4 public CSV files are allowed in the data/ directory
# - Question Q2.2 files must always be excluded (contains locations)
# - Review all outputs before committing to ensure anonymization
#
# HOW TO USE:
# 1. This file is automatically applied by Git
# 2. Use 'git status' to verify files are properly ignored
# 3. Use 'git add -f' to force-add files if absolutely necessary
# 4. Run 'R/99_quality_checks.R' to validate privacy compliance
#
# ===========================================

# ---------------------------------------------
# R and RStudio Files
# ---------------------------------------------
.Rhistory
.RData
.RDataTmp
.Rproj.user/
.Rproj.user
.Ruserdata
.Rprofile
.Renviron
*.Rproj
rsconnect/

# ---------------------------------------------
# renv Package Management
# Purpose: Exclude local package libraries while keeping lock file
# ---------------------------------------------
renv/library/
renv/staging/
renv/local/
renv/cellar/
renv/lock/
renv/python/
renv/sandbox/
renv/source/
# Keep renv.lock file for reproducibility
!renv.lock

# ---------------------------------------------
# Raw Data - CRITICAL: Never commit raw survey data
# These files contain PII and violate ethics approval if shared
# ---------------------------------------------
data_raw/
raw_data/
*.xlsx
*.xls
*_raw.csv
*_RAW.csv
raw_*.csv
survey_export*.csv
original_*.csv

# ---------------------------------------------
# Deprecated Files - Should be deleted if found
# Pipeline will warn if these exist
# ---------------------------------------------
data/climate_finance_survey_classified.csv
data/climate_finance_survey_anonymized.csv
*deprecated*
*DEPRECATED*

# ---------------------------------------------
# PII and Sensitive Data Patterns
# Any file matching these patterns likely contains personal information
# ---------------------------------------------
# Question 2.2 and related files (contains geographic coordinates)
*Q2.2*
*Q2_2*
*q2.2*
*q2_2*

# Email patterns
*email*
*Email*
*EMAIL*
*mail_address*

# Contact information
*address*
*Address*
*ADDRESS*
*phone*
*Phone*
*PHONE*
*contact*
*Contact*

# Organization identifiers
*organization_names*
*company_names*
*company_list*
*org_list*
*employer*

# Personal information
*personal_info*
*PII*
*pii*
*personal_data*
*identifiable*
*names_list*
*respondent_names*

# ---------------------------------------------
# Output Files - Selective inclusion
# Most outputs excluded until privacy-verified
# ---------------------------------------------
# Block most outputs by default
output/*.csv
output/*.xlsx
output/*.rds
output/*.html
output/tables/*.csv
output/models/*.rds

# But explicitly allow key public artifacts
!output/classification_audit.csv
!output/hypothesis_testing_summary.csv
!output/quality_assurance_report.csv
!output/.gitkeep

# ---------------------------------------------
# Figures - Review before committing
# Figures may inadvertently reveal geographic patterns
# ---------------------------------------------
figures/*.png
figures/*.pdf
figures/*.jpg
figures/*.jpeg
figures/*.svg
figures/*.eps

# Block figures with potential sensitive data
figures/*Q2.2*
figures/*geographic*
figures/*location*
figures/*country*

# But allow verified anonymized figures
!figures/figure4_geographic_distribution.png
!figures/.gitkeep

# ---------------------------------------------
# Data Files - Selective inclusion
# Only 4 CSV files are public per ethics approval
# ---------------------------------------------
# Block all CSV by default
data/*.csv

# But explicitly allow public artifacts (N=1,563 and N=1,307)
!data/survey_responses_anonymized_basic.csv
!data/survey_responses_anonymized_preliminary.csv
!data/climate_finance_survey_final_1307.csv
!data/data_dictionary.csv
!data/.gitkeep

# ---------------------------------------------
# Documentation - Allow most, block drafts
# ---------------------------------------------
docs/*.draft
docs/*.todo
docs/drafts/
docs/working/

# But keep key documentation
!docs/appendix_j_classification_template.csv
!docs/checksums.txt
!docs/verification_report.md
!docs/.gitkeep

# ---------------------------------------------
# Temporary and Backup Files
# These can accumulate and may contain sensitive data
# ---------------------------------------------
*.tmp
*.temp
*.bak
*.backup
*.old
*~
.~*
~$*
*.swp
*.swo
*.orig

# ---------------------------------------------
# Log Files (may contain sensitive info)
# Logs might include data samples or error messages with PII
# ---------------------------------------------
logs/
*.log
error_log.txt
last_error.txt
last_error_summary.txt
debug_*.txt
trace_*.txt

# ---------------------------------------------
# R Session and Checkpoint Files
# These may contain workspace data including sensitive variables
# ---------------------------------------------
.RData
*.rda
*.rds
checkpoints/
.Rproj.user/*
*.Rcheck/

# Except explicitly needed RDS files
!data/processed/*.rds

# ---------------------------------------------
# Operating System Files
# ---------------------------------------------
# macOS
.DS_Store
.AppleDouble
.LSOverride
Icon
._*
.Spotlight-V100
.Trashes

# Windows
Thumbs.db
ehthumbs.db
Desktop.ini
$RECYCLE.BIN/
*.cab
*.msi
*.msm
*.msp

# Linux
*~
.directory
.Trash-*

# ---------------------------------------------
# IDE and Editor Files
# Team members may use different editors
# ---------------------------------------------
# Visual Studio Code
.vscode/
*.code-workspace

# RStudio
.Rproj.user

# JetBrains IDEs
.idea/
*.iml
*.iws
*.ipr

# Sublime Text
*.sublime-project
*.sublime-workspace

# Vim
[._]*.s[a-v][a-z]
[._]*.sw[a-p]
Session.vim
.netrwhist

# Emacs
*~
\#*\#
/.emacs.desktop
/.emacs.desktop.lock
*.elc
auto-save-list

# ---------------------------------------------
# Python (if mixed environment)
# Some team members may use Python for supplementary analysis
# ---------------------------------------------
__pycache__/
*.py[cod]
*$py.class
.Python
env/
venv/
ENV/
.venv
pip-log.txt
pip-delete-this-directory.txt

# ---------------------------------------------
# Package and Archive Files
# ---------------------------------------------
*.tar
*.tar.gz
*.zip
*.7z
*.rar
*.gz
*.bz2
*.xz

# ---------------------------------------------
# Database Files
# May contain raw survey data
# ---------------------------------------------
*.sql
*.sqlite
*.sqlite3
*.db
*.mdb
*.accdb

# ---------------------------------------------
# Credentials and Secrets - NEVER commit
# Even though survey is anonymous, protect any API keys
# ---------------------------------------------
*.key
*.pem
*.p12
*.pfx
*credentials*
*credential*
*token*
*secret*
*password*
.env
.env.*
.env.local
.env.*.local
config/secrets.yml
auth.json

# ---------------------------------------------
# Personal Notes and Working Files
# Researchers' personal notes may contain observations about data
# ---------------------------------------------
notes/
personal/
private/
scratch/
TODO.md
NOTES.md
working_notes/
my_notes/

# ---------------------------------------------
# Large Binary Files
# ---------------------------------------------
*.mp4
*.avi
*.mov
*.wmv
*.flv
*.mkv
*.webm
*.mp3
*.wav
*.flac

# ---------------------------------------------
# CRITICAL FILES TO KEEP - Never ignore these
# These files are essential for pipeline operation
# ---------------------------------------------
!R/00_config.R
!R/appendix_j_config.R
!R/01_anonymize_data.R
!R/02_classify_stakeholders.R
!R/get_exact_1307.R
!R/03_main_analysis.R
!R/04_hypothesis_testing.R
!R/99_quality_checks.R
!run_all.R
!README.md
!LICENSE
!.editorconfig
!.gitignore

# ---------------------------------------------
# End of .gitignore
# Remember: When in doubt, exclude it!
# Data privacy > Convenience
# ---------------------------------------------
